!function i(a,u,s){function c(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,i,a,u,s)}return u[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,n){function l(){}function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}l.maxFromBits=function(e){return Math.pow(2,e)},l.limitUI04=l.maxFromBits(4),l.limitUI06=l.maxFromBits(6),l.limitUI08=l.maxFromBits(8),l.limitUI12=l.maxFromBits(12),l.limitUI14=l.maxFromBits(14),l.limitUI16=l.maxFromBits(16),l.limitUI32=l.maxFromBits(32),l.limitUI40=l.maxFromBits(40),l.limitUI48=l.maxFromBits(48),l.randomUI04=function(){return r(0,l.limitUI04-1)},l.randomUI06=function(){return r(0,l.limitUI06-1)},l.randomUI08=function(){return r(0,l.limitUI08-1)},l.randomUI12=function(){return r(0,l.limitUI12-1)},l.randomUI14=function(){return r(0,l.limitUI14-1)},l.randomUI16=function(){return r(0,l.limitUI16-1)},l.randomUI32=function(){return r(0,l.limitUI32-1)},l.randomUI40=function(){return(0|Math.random()*(1<<30))+(0|1024*Math.random())*(1<<30)},l.randomUI48=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},l.paddedString=function(e,t,n){n=n||"0";for(var r=t-(e=String(e)).length;0<r;r>>>=1,n+=n)1&r&&(e=n+e);return e},l.prototype.fromParts=function(e,t,n,r,o,i){return this.version=n>>12&15,this.hex=l.paddedString(e.toString(16),8)+"-"+l.paddedString(t.toString(16),4)+"-"+l.paddedString(n.toString(16),4)+"-"+l.paddedString(r.toString(16),2)+l.paddedString(o.toString(16),2)+"-"+l.paddedString(i.toString(16),12),this},l.prototype.toString=function(){return this.hex},l.prototype.toURN=function(){return"urn:uuid:"+this.hex},l.prototype.toBytes=function(){for(var e=this.hex.split("-"),t=[],n=0,r=0;r<e.length;r++)for(var o=0;o<e[r].length;o+=2)t[n++]=parseInt(e[r].substr(o,2),16);return t},l.prototype.equals=function(e){return e instanceof UUID&&this.hex===e.hex},l.getTimeFieldValues=function(e){var t=e-Date.UTC(1582,9,15),n=t/4294967296*1e4&268435455;return{low:1e4*(268435455&t)%4294967296,mid:65535&n,hi:n>>>16,timestamp:t}},l._create4=function(){return(new l).fromParts(l.randomUI32(),l.randomUI16(),16384|l.randomUI12(),128|l.randomUI06(),l.randomUI08(),l.randomUI48())},l._create1=function(){var e=(new Date).getTime(),t=l.randomUI14(),n=1099511627776*(1|l.randomUI08())+l.randomUI40(),r=l.randomUI04(),o=0;e!=o?(e<o&&t++,o=e,r=l.randomUI04()):Math.random()<.25&&r<9984?r+=1+l.randomUI04():t++;var i=l.getTimeFieldValues(o),a=i.low+r,u=4095&i.hi|4096,s=(t&=16383)>>>8|128,c=255&t;return(new l).fromParts(a,i.mid,u,s,c,n)},l.create=function(e){return this["_create"+(e=e||4)]()},l.fromTime=function(e,t){t=t||!1;var n=l.getTimeFieldValues(e),r=n.low,o=4095&n.hi|4096;return!1===t?(new l).fromParts(r,n.mid,o,0,0,0):(new l).fromParts(r,n.mid,o,128|l.limitUI06,l.limitUI08-1,l.limitUI48-1)},l.firstFromTime=function(e){return l.fromTime(e,!1)},l.lastFromTime=function(e){return l.fromTime(e,!0)},l.fromURN=function(e){var t;return(t=/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i.exec(e))?(new l).fromParts(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),parseInt(t[4],16),parseInt(t[5],16),parseInt(t[6],16)):null},l.fromBytes=function(e){if(e.length<5)return null;for(var t="",n=0,r=[4,2,2,2,6],o=0;o<r.length;o++){for(var i=0;i<r[o];i++){var a=e[n++].toString(16);1==a.length&&(a="0"+a),t+=a}6!==r[o]&&(t+="-")}return l.fromURN(t)},l.fromBinary=function(e){for(var t=[],n=0;n<e.length;n++)if(t[n]=e.charCodeAt(n),255<t[n]||t[n]<0)throw new Error("Unexpected byte in binary data.");return l.fromBytes(t)},l.new=function(){return this.create(4)},l.newTS=function(){return this.create(1)},t.exports=l},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.nip=function(e){return e.slice(0,e.length-1)},n.head=function(e){return e[0]},n.tail=function(e){return e.slice(1)},n.rnd=function(e){return Math.floor(Math.random()*Math.floor(e))}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={north:{x:0,y:-1,name:"north"},south:{x:0,y:1,name:"south"},east:{x:1,y:0,name:"east"},west:{x:-1,y:0,name:"west"}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.constrain=n.rndPoint=n.touch=void 0;var r=e("./algo");n.touch=function(t){return function(e){return t.x==e.x&&t.y==e.y}},n.rndPoint=function(e){return{x:(0,r.rnd)(e.cols),y:(0,r.rnd)(e.rows)}},n.constrain=function(t){return function(e){return(e%t+t)%t}}},{"./algo":2}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hitsSelf=n.eatsApple=void 0;var r=e("../core/point"),o=e("./next_head");n.eatsApple=function(e){return(0,r.touch)((0,o.nextHead)(e))(e.apple)},n.hitsSelf=function(t){return t.snake.find(function(e){return(0,r.touch)((0,o.nextHead)(t))(e)})}},{"../core/point":4,"./next_head":9}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initialState=void 0;var r,o=e("../core/directions");var i={cols:40,rows:28,moves:[((r=o)&&r.__esModule?r:{default:r}).default.east],snake:[{x:2,y:2},{x:3,y:2}],apple:{x:16,y:2}};n.initialState=i},{"../core/directions":3}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initialState=n.next=void 0;var r,o=e("../core/directions"),i=(r=o)&&r.__esModule?r:{default:r},a=e("./next_move"),u=e("./next_snake"),s=e("./next_apple");var c={cols:20,rows:14,moves:[i.default.east],snake:[{x:2,y:2},{x:3,y:2}],apple:{x:16,y:2}};n.next=function(e){return{rows:e.rows,cols:e.cols,moves:(0,a.nextMoves)(e),snake:(0,u.nextSnake)(e),apple:(0,s.nextApple)(e)}},n.initialState=c},{"../core/directions":3,"./next_apple":8,"./next_move":10,"./next_snake":11}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextApple=void 0;var r=e("./collision"),o=e("../core/point");n.nextApple=function(e){return(0,r.eatsApple)(e)?(0,o.rndPoint)(e):e.apple}},{"../core/point":4,"./collision":5}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextHead=void 0;var i=e("../core/algo"),a=e("../core/point");n.nextHead=function(e){if(0==e.snake.length)return(0,a.rndPoint)(e);var t=(0,a.constrain)(e.cols),n=(0,a.constrain)(e.rows),r=(0,i.head)(e.snake),o=(0,i.head)(e.moves);return{x:t(r.x+o.x),y:n(r.y+o.y)}}},{"../core/algo":2,"../core/point":4}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextMoves=void 0;var r=e("../core/algo");n.nextMoves=function(e){return 1<e.moves.length?(0,r.tail)(e.moves):e.moves}},{"../core/algo":2}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextSnake=void 0;var r=e("../core/algo"),o=e("../core/point"),i=e("./next_head"),a=e("./collision");n.nextSnake=function(e){return 0==e.snake.length?[(0,o.rndPoint)(e)]:(0,a.hitsSelf)(e)?[]:(0,a.eatsApple)(e)?[(0,i.nextHead)(e)].concat(e.snake):(0,r.nip)([(0,i.nextHead)(e)].concat(e.snake))}},{"../core/algo":2,"../core/point":4,"./collision":5,"./next_head":9}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../render/canvas"),o=e("../input/keyboard"),i=e("../engine/next"),a=e("../engine/init"),u=(setInterval(function(){u=(0,o.keyMoves)(u),u=(0,i.next)(u),(0,r.draw)(u)},100),a.initialState);(0,r.draw)(u),n.default=null},{"../engine/init":6,"../engine/next":7,"../input/keyboard":13,"../render/canvas":14}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.keyMoves=void 0;var r,o=e("../core/directions"),i=(r=o)&&r.__esModule?r:{default:r};var a=[],u=function(e){a.push(e)};window.addEventListener("keydown",function(e){switch(e.key){case"w":case"ArrowUp":u(i.default.north);break;case"a":case"ArrowLeft":u(i.default.west);break;case"s":case"ArrowDown":u(i.default.south);break;case"d":case"ArrowRight":u(i.default.east)}}),n.keyMoves=function(e){var t={rows:e.rows,cols:e.cols,moves:e.moves.concat(a),snake:e.snake,apple:e.apple};return a=[],t}},{"../core/directions":3}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=document.getElementById("gameboard"),i=o.getContext("2d");n.draw=function(t){var n=function(e){return Math.round(e*o.width/t.cols)},r=function(e){return Math.round(e*o.height/t.rows)};i.fillStyle="#333",i.fillRect(0,0,o.width,o.height),i.fillStyle="#7df",t.snake.map(function(e){return i.fillRect(n(e.x),r(e.y),n(1),r(1))}),i.fillStyle="#f30",i.fillRect(n(t.apple.x),r(t.apple.y),n(1),r(1)),0==t.snake.length&&(i.fillStyle="#f00",i.fillRect(0,0,o.width,o.height))}},{}],15:[function(e,t,n){"use strict";var r=e("./users/host");e("./gameloop/gameloop"),window.cheet("x x x",function(){(0,r.clearHost)(),window.location=window.location.href})},{"./gameloop/gameloop":12,"./users/host":16}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clearHost=n.setName=n.getHost=void 0;var r,o=e("uuid-js");var i=((r=o)&&r.__esModule?r:{default:r}).default.create(),a={id:i.toString(),uuid:i,name:"Host"},u=function(){var e=JSON.parse(window.localStorage.getItem("host"));return e||(window.localStorage.setItem("host",JSON.stringify(a)),a)};u();n.getHost=u,n.setName=function(e){var t=u();t.name=e,window.localStorage.setItem("host",JSON.stringify(t))},n.clearHost=function(){return window.localStorage.removeItem("host")}},{"uuid-js":1}]},{},[15]);
//# sourceMappingURL=snake.js.map
